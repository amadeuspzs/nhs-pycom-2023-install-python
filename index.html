<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>How I learned to stop worrying and embrace pip, conda, virtualenv, venv and Visual Studio Code (How to install Python)</title>

		<meta name="description" content="A talk for NHS R/python Conference 2023">
		<meta name="author" content="Amadeus Stevenson">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/serif.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
		<style>
		.reveal pre code {
 		   overflow-x: hidden !important;
		}
		</style>
		<script>
		    var urlParams = new URLSearchParams(window.location.search);
			var slides = document.querySelectorAll('[data-background-image]');

			if (!urlParams.has('print-pdf')) {
				slides.forEach(function(slide) {
					if (slide.hasAttribute('data-background-image')) {
						slide.removeAttribute('data-background-image');
					}
				});
			}
		</script>
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<section>
						<p>How I learned to stop worrying and embrace pip, conda, virtualenv, venv and Visual Studio Code</p>
						<h2>
							(How to install Python)
						</h2>
					</section>
					<section>
						<img src="img/gen-ai.png" alt="">
					</section>
				</section>
				<section data-background-image="img/obh_team.png" data-background-iframe="https://www.outcomesbasedhealthcare.com/our-team/" data-background-interactive>					
					<div style="position: absolute; width: 50%; right: 0; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left;">
						<h2>A brief history</h2>
						<p><ul>
							<li>Technical Lead <em>at</em> Outcomes Based Healthcare</li>
							<li>Data/Technology Lead <em>at</em> NHS AI Lab (NHSX)</li>
							<li>CTO/CPO <em>at</em> Decoded</li>
							<li>PhD in "nanomedicine" (Biological Physics)</li>
						</ul></p>
					</div>
				</section>

				
				<section>
					<section>
						<h2>What is Python?</h2>
						<pre><code class="hljs console" data-trim data-noescape>
							C:\Users\AmadeusStevenson>python
							'python' is not recognized as an internal or external command,
							operable program or batch file.				
						</code></pre>
					</section>
					<section>
						<style>
							.hljs-ln-numbers {
							  display: none;
							}
						  </style>
						<h2>What is Python?</h2>
						<pre><code class="hljs console" data-trim data-noescape data-line-numbers="1-5|6-7|8|9-10">
							C:\Users\AmadeusStevenson>python
							Python 3.9.13 (main, Aug 25 2022, 23:51:50) [MSC v.1916 64 bit (AMD64)] :: Anaconda, Inc. on win32
							
							Type "help", "copyright", "credits" or "license" for more information.
							>>> 
							>>> print("Hello world")
							Hello world
							>>>	import os
							>>> print(f"You are logged in as '{os.getlogin()}'")
							You are logged in as 'AmadeusStevenson'		
						</code></pre>
					</section>
					<section>
						<h2>What is Python?</h2>
						<pre><code class="hljs python" data-trim data-noescape>
							# this file will be saved as example.py
							import os
							
							if __name__ == "__main__":
								print(f"You are logged in as '{os.getlogin()}'")
						</code></pre>
						<pre class="fragment"><code class="hljs console" data-trim data-noescape>
							C:\Users\AmadeusStevenson>python example.py
							You are logged in as 'AmadeusStevenson'

							C:\Users\AmadeusStevenson>
						</code></pre>
					</section>
					<section data-background-image="img/jupyter.png" data-background-iframe="https://jupyter.org/try-jupyter/retro/notebooks/?path=notebooks/Intro.ipynb" data-background-interactive>
					</section>
				</section>
			
				<section>
					<a href="https://pypi.org/" target="_blank"><img data-src="https://pypi.org/static/images/logo-large.9f732b5f.svg"></a>
				</section>

				<section>
					<section>
						<style>
							.hljs-ln-numbers {
							  display: none;
							}
						  </style>
						<h2>Python Packages</h2>
						<pre><code class="hljs python" data-trim data-noescape data-line-numbers="5-9">
							C:\Users\AmadeusStevenson>python
							Python 3.9.13 (main, Aug 25 2022, 23:51:50) [MSC v.1916 64 bit 
							(AMD64)] :: Anaconda, Inc. on win32
							
							Type "help", "copyright", "credits" or "license" for more information.
							>>> import nhs-number
							Traceback (most recent call last):
							File "<stdin>", line 1, in <module>
						    ModuleNotFoundError: No module named 'nhs-number'
						</code></pre>
					</section>
					<section>
						<h2>Python Packages</h2>
						<pre><code class="hljs console" data-trim data-noescape>
							C:\Users\AmadeusStevenson>pip install nhs-number
							'pip' is not recognized as an internal or external command,
							operable program or batch file.				
						</code></pre>
					</section>
					<section>
						<h2>Python Packages</h2>
						<pre><code class="hljs console" data-trim data-noescape>
							C:\Users\AmadeusStevenson>pip install nhs-number
							Collecting nhs-number
							  Downloading nhs_number-1.3.4-py3-none-any.whl (9.3 kB)
							Installing collected packages: nhs-number
							Successfully installed nhs-number-1.3.4
							
							[notice] A new release of pip is available: 23.1.2 -> 23.2.1
							[notice] To update, run: python.exe -m pip install --upgrade pip
						</code></pre>
					</section>
					<section>
						<a href="https://about.honywen.com/publication/2023ase/" target="_blank"><img data-src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbnNldWVwN295MmZ6cXNkeGJsMW9lcWZra2xsd2s0eXJpZm1nZXdzeSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/J20Z2SH5WmCnzSrbqA/giphy.gif" alt=""></a>
					</section>
					<section>
						<h2>Proxy "mitm"</h2>
						<pre><code class="hljs console" data-trim data-noescape>
							C:\Users\AmadeusStevenson>pip install nhs-number
							Collecting nhs-number
								Could not fetch URL https://pypi.python.org/: connection error:
								[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:598)
						</code></pre>
						<pre class="fragment">
							<code class="hljs console" data-trim data-noescape>
							pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org nhs-number -vvv
							</code>
						</pre>
					</section>
					<section>
						<h2>Network block</h2>
						<pre><code class="hljs console" data-trim data-noescape>
							C:\Users\AmadeusStevenson>pip install nhs-number
							Collecting nhs-number
								Retrying (Retry(total=3, connect=None, read=None, redirect=None))
								after connection broken by 'ConnectTimeoutError(&lt;pip._vendor.requ
								ests.packages.urllib3.connection.VerifiedHTTPSConnection object at 
								0x035884B0&gt;, 'Connection to pypi.python.org timed out. (connect ti
								meout=15)')': /simple/nhs-number/
						</code></pre>
						<pre class="fragment">
							<code class="hljs console" data-trim data-noescape>
							pip install --proxy=user:pass@server:port nhs-number -vvv
							</code>
						</pre>
						<pre class="fragment">
							<code class="hljs console" data-trim data-noescape>
							pip install --index-url http://internal.repo/simple/ nhs-number -vvv
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code class="hljs python" data-trim data-noescape data-line-numbers="5|6-7">
								C:\Users\AmadeusStevenson>python
								Python 3.9.13 (main, Aug 25 2022, 23:51:50) [MSC v.1916 64 bit 
								(AMD64)] :: Anaconda, Inc. on win32
								Type "help", "copyright", "credits" or "license" for more information.
								>>> import nhs_number
								>>> nhs_number.generate(quantity=5)
								['9537591522', '6165489400', '2499165413', '1474925588', '8268731001']
							</code>
						</pre>
					</section>		
				</section>
				<section>
					<h3>What do you need to run Python?</h3>
					<p><ol>
						<li class="fragment">The python executable</li>
						<li class="fragment">The python packages you need</li>
					</ol></p>
				</section>
				<section>
					<h3>What do you <em>really</em> need to run Python?</h3>
					<p><ol>
						<li class="fragment">The <strong><a target="_blank" href="https://github.com/nhsx/skunkworks-long-stayer-risk-stratification-baseline/blob/main/README.md">specific</a> <a href="https://github.com/pyenv-win/pyenv-win" target="_blank">version</a></strong> of the python executable</li>
						<li class="fragment">The <strong><a target="_blank" href="https://github.com/nhsx/skunkworks-long-stayer-risk-stratification-baseline/blob/main/requirements.txt">specific versions</a></strong> of the python packages you need</li>
						<li class="fragment">A development <strong><a href="https://nhsdigital.github.io/rap-community-of-practice/training_resources/python/virtual-environments/why-use-virtual-environments/" target="_blank">environment</a></strong> where you can switch between projects</li>
					</ol></p>
				</section>				

				<section>
	
					<section>
						<a href="https://legal.anaconda.com/policies/en/#terms-of-service" target="_blank"><img src="img/conda-venn.png"></a>
						<p style="font-size: 50%">Source: <a href="https://whiteboxml.com/blog/the-definitive-guide-to-python-virtual-environments-with-conda" target="_blank">https://whiteboxml.com/blog/the-definitive-guide-to-python-virtual-environments-with-conda</a></p>
					</section>

					<section>
						<img src="img/install_miniconda.png" alt="">
					</section>

					<section>
						<img src="img/miniconda_start_menu.png" alt="">
					</section>

					<section>
						<pre><code class="hljs python" data-trim data-noescape data-line-numbers="1,7|2-6,8-13">
							(base) C:\Users\AmadeusStevenson>pip install nhs-number
							Collecting nhs-number
							  Using cached nhs_number-1.3.4-py3-none-any.whl (9.3 kB)
							Installing collected packages: nhs-number
							Successfully installed nhs-number-1.3.4

							(base) C:\Users\AmadeusStevenson>python
							Python 3.11.4 | packaged by Anaconda, Inc. | (main, Jul  5 2023, 13:47:18) [MSC v.1916 64 bit (AMD64)] on win32
							Type "help", "copyright", "credits" or "license" for more information.
							>>> import nhs_number
							>>> nhs_number.generate(quantity=5)
							['0360401228', '7708487889', '6158587664', '6327117295', '9733188115']
							>>>							
						</code></pre>
					</section>
				</section>

				<section>
					<a href="https://code.visualstudio.com/docs/python/environments" target="_blank">
						<img src="img/vscode.png" alt="" width="50%">
					</a>					
				</section>

				<section>
					<section>
						<h2>My current setup</h2>
						<ul>
							<li>Miniconda</li>
							<li class="fragment">Visual Studio Code</li>
							<li class="fragment">README.md</li>
							<li class="fragment">requirements.txt</li>
							<li class="fragment"><strike>WSL</strike></li>
						</ul>
					</section>
					<section>
						<h2>What I should be using</h2>
						<ul>
							<li class="fragment">environment.yml</li>
							<li class="fragment">Dev containers (VS Code)</li>
							<li class="fragment">poetry?</li>
						</ul>
					</section>
				</section>
				
				<section>
					<h2>Takeaways</h2>
					<img class="fragment" src="img/sean_bean.jpg" alt="">
				</section>

				<section>
					<h2>Takeaways</h2>
					<ol>
						<li>Know what version of python you're running</li>
						<li class="fragment">Know what versions of packages you need/are running</li>
						<li class="fragment">Start with your "Getting Started" documentation and add into it as you go</li>
						<li class="fragment">Operate without admin privileges</li>
						<li class="fragment">Plan for setting up on a new machine/environment</li>
					</ol>
				</section>

			</div>

		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/search/search.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>

			// Workaround for iframes and print mode
			// By default I add a static background image, which is removed if print mode
			// not detected
			var urlParams = new URLSearchParams(window.location.search);
			var slides = document.querySelectorAll('[data-background-image]');

			if (!urlParams.has('print-pdf')) {
				slides.forEach(function(slide) {
					if (slide.hasAttribute('data-background-image')) {
						slide.removeAttribute('data-background-image');
					}
				});
			}

			// Also available as an ES module, see:
			// https://revealjs.com/initialization/
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,
				transition: 'none',
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight ]
			});

		</script>

	</body>
</html>
